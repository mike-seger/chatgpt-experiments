CREATE USER myuser IDENTIFIED BY mypassword;
GRANT CONNECT, RESOURCE TO myuser;
ALTER USER myuser DEFAULT TABLESPACE users;

CREATE TABLE myuser.MY_TABLE (
  ID NUMBER(10),
  CREATED TIMESTAMP,
  DATA BLOB
);

INSERT INTO myuser.MY_TABLE (ID, DATA) VALUES (1, EMPTY_BLOB());

DECLARE
  l_blob BLOB;
BEGIN
  SELECT DATA INTO l_blob FROM myuser.MY_TABLE WHERE ID = 1 AND ROWNUM = 1 FOR UPDATE;
  DBMS_LOB.CREATETEMPORARY(l_blob, TRUE);
  DBMS_LOB.OPEN(l_blob, DBMS_LOB.LOB_READWRITE);
  DBMS_LOB.WRITE(l_blob, LENGTH('test data'), 1, UTL_RAW.CAST_TO_RAW('test data'));
  DBMS_LOB.CLOSE(l_blob);
  UPDATE myuser.MY_TABLE SET DATA = l_blob WHERE ID = 1;
  COMMIT;
END;
/

INSERT INTO myuser.MY_TABLE (ID, DATA) VALUES (2, UTL_RAW.CAST_TO_RAW('test data 2'));

